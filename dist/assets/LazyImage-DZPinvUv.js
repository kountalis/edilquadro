import{j as s}from"./ui-vendor-CglP4wyi.js";import{r as o}from"./router-vendor-DhjEXmDM.js";const $=({src:e,webpSrc:a,alt:i,className:l,imageClassName:c,width:u="600",height:m="400",loading:d="lazy",fetchpriority:p="low"})=>{const[r,f]=o.useState(!1),[g,y]=o.useState(!1);return o.useEffect(()=>{const n=new IntersectionObserver(x=>{x[0].isIntersecting&&(y(!0),n.disconnect())},{rootMargin:"100px"}),t=document.getElementById(`lazy-img-${e.replace(/[^a-zA-Z0-9]/g,"")}`);return t&&n.observe(t),()=>{t&&n.unobserve(t)}},[e]),s.jsx("div",{id:`lazy-img-${e.replace(/[^a-zA-Z0-9]/g,"")}`,className:`relative lazy-image ${l||""} ${r?"":"bg-gray-200 animate-pulse"}`,style:{backgroundColor:r?"transparent":"#f0f0f0"},children:g&&s.jsxs("picture",{children:[a&&a.endsWith(".webp")&&s.jsx("source",{srcSet:`${encodeURI(a)} 1x`,type:"image/webp"}),s.jsx("img",{src:e,alt:i,width:u,height:m,loading:d,fetchpriority:p,onLoad:()=>f(!0),className:`w-full h-full ${c||""} ${r?"opacity-100 transition-opacity duration-300":"opacity-0"}`})]})})};export{$ as L};
